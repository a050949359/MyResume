/* empty css             *//* empty css                   */import{a as E}from"./http.8f9ab749.js";import{a as v,p,a2 as C,a3 as b,V as A,U as h,W as V,r as w,X as k,o as x,H as D,C as l,e as s,u as y,b as t,J as m,f as U,S as q}from"./vendor.c111f7b4.js";import{u as S}from"./index.1a3ca6b7.js";const I={class:"login"},N={class:"form-container"},R={class:"manage-tip"},H=l("span",{class:"title"},"\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",-1),J=m("\u767B\u5F55"),M={class:"tiparea"},T=m(" \u8FD8\u6CA1\u6709\u8D26\u53F7? \u73B0\u5728"),W=m("\u6CE8\u518C"),L=v({setup(X){const c=p(),_=C(),d=S(),o=p({email:"27732357@qq.com",password:"321321"}),f=b({email:[{type:"email",required:!0,message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:6,max:30,message:"\u957F\u5EA6\u57286\u523030\u4E2A\u5B57\u7B26\u4E4B\u95F4",trigger:"blur"}]}),B=i=>{!i||i.validate(async e=>{if(e){const{data:{success:r,token:u}}=await E.post("/api/users/login",o.value);if(r&&u){localStorage.setItem("token",u);const a=U(u);console.log(a),d.setAuth(!!a),d.setUser(a),q({message:"\u7528\u6237\u767B\u5F55\u6210\u529F.",type:"success"}),_.push("/")}}else return console.log("error submit!"),!1})};return(i,e)=>{const r=A,u=h,a=V,F=w("router-link"),g=k;return x(),D("div",I,[l("section",N,[l("div",R,[H,s(g,{rules:y(f),ref_key:"ruleFormRef",ref:c,model:o.value,class:"loginForm","label-width":"80px"},{default:t(()=>[s(u,{label:"\u90AE\u7BB1",prop:"email"},{default:t(()=>[s(r,{modelValue:o.value.email,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.email=n),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),s(u,{label:"\u5BC6\u7801",prop:"password"},{default:t(()=>[s(r,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.password=n),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password"},null,8,["modelValue"])]),_:1}),s(u,null,{default:t(()=>[s(a,{onClick:e[2]||(e[2]=n=>B(c.value)),class:"submit-btn"},{default:t(()=>[J]),_:1})]),_:1}),l("div",M,[l("p",null,[T,s(F,{to:"/register"},{default:t(()=>[W]),_:1})])])]),_:1},8,["rules","model"])])])])}}});export{L as default};
