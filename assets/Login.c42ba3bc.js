/* empty css             *//* empty css                   */import{a as E}from"./http.d2d3dcea.js";import{a as v,q as p,a6 as A,a7 as b,a0 as C,$ as h,a1 as w,r as V,a2 as k,o as x,A as D,G as l,e as s,u as q,b as t,M as m,f as y,Z as U}from"./vendor.92a08db9.js";import{u as I}from"./index.e9871709.js";const N={class:"login"},R={class:"form-container"},S={class:"manage-tip"},M=l("span",{class:"title"},"\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",-1),$=m("\u767B\u5F55"),G={class:"tiparea"},T=m(" \u8FD8\u6CA1\u6709\u8D26\u53F7? \u73B0\u5728"),Z=m("\u6CE8\u518C"),O=v({setup(j){const c=p(),_=A(),d=I(),o=p({email:"27732357@qq.com",password:"321321"}),f=b({email:[{type:"email",required:!0,message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:6,max:30,message:"\u957F\u5EA6\u57286\u523030\u4E2A\u5B57\u7B26\u4E4B\u95F4",trigger:"blur"}]}),B=i=>{!i||i.validate(async e=>{if(e){const{data:{success:r,token:u}}=await E.post("/api/users/login",o.value);if(r&&u){localStorage.setItem("token",u);const a=y(u);console.log(a),d.setAuth(!!a),d.setUser(a),U({message:"\u7528\u6237\u767B\u5F55\u6210\u529F.",type:"success"}),_.push("/")}}else return console.log("error submit!"),!1})};return(i,e)=>{const r=C,u=h,a=w,F=V("router-link"),g=k;return x(),D("div",N,[l("section",R,[l("div",S,[M,s(g,{rules:q(f),ref_key:"ruleFormRef",ref:c,model:o.value,class:"loginForm","label-width":"80px"},{default:t(()=>[s(u,{label:"\u90AE\u7BB1",prop:"email"},{default:t(()=>[s(r,{modelValue:o.value.email,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.email=n),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),s(u,{label:"\u5BC6\u7801",prop:"password"},{default:t(()=>[s(r,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.password=n),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password"},null,8,["modelValue"])]),_:1}),s(u,null,{default:t(()=>[s(a,{onClick:e[2]||(e[2]=n=>B(c.value)),class:"submit-btn"},{default:t(()=>[$]),_:1})]),_:1}),l("div",G,[l("p",null,[T,s(F,{to:"/register"},{default:t(()=>[Z]),_:1})])])]),_:1},8,["rules","model"])])])])}}});export{O as default};
